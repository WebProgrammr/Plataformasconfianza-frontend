<div class="admin-page">
  <h2>Aprobar Recargas Pendientes</h2>

  <div *ngIf="isLoading" class="loading">
    <p>Cargando recargas pendientes...</p>
  </div>

  <div *ngIf="errorMessage" class="message error anim-fade-in">
     <i class="fas fa-exclamation-triangle me-2"></i> {{ errorMessage }}
  </div>

  <div *ngIf="successMessage" class="message success anim-fade-in">
     <i class="fas fa-check-circle me-2"></i> {{ successMessage }}
  </div>

  <div *ngIf="!isLoading && !errorMessage && recargasPendientes.length === 0" class="message info anim-fade-in">
    <i class="fas fa-info-circle me-2"></i> No hay recargas pendientes de aprobación.
  </div>

  <div class="table-container" *ngIf="!isLoading && !errorMessage && recargasPendientes.length > 0">
    <table class="admin-table futuristic-table"> <thead>
        <tr>
          <th><i class="fas fa-calendar-alt"></i> Fecha Sol.</th>
          <th><i class="fas fa-user"></i> ID Usuario</th>
          <th><i class="fas fa-money-bill-wave"></i> Monto</th>
          <th><i class="fas fa-credit-card"></i> Método</th>
          <th><i class="fas fa-receipt"></i> Comprobante</th>
          <th><i class="fas fa-sticky-note"></i> Nota Usuario</th>
          <th><i class="fas fa-cogs"></i> Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let recarga of recargasPendientes">
          <td data-label="Fecha Sol.">{{ recarga.fechaSolicitud | date:'dd/MM/yy HH:mm' }}</td>
          <td data-label="ID Usuario">{{ recarga.idUsuario }}</td>
          <td data-label="Monto">{{ recarga.monto | currency:'S/ ' }}</td>
          <td data-label="Método">{{ recarga.metodoPago || '-' }}</td>
          <td data-label="Comprobante">
            <button
              *ngIf="recarga.comprobanteUrl"
              (click)="verComprobante(recarga.comprobanteUrl)"
              class="btn-link" title="Ver comprobante">
              <i class="fas fa-external-link-alt"></i> Ver
            </button>
            <span *ngIf="!recarga.comprobanteUrl">-</span>
          </td>
           <td data-label="Nota Usuario" class="nota-cell">{{ recarga.nota || '-' }}</td>
          <td data-label="Acciones" class="actions-cell">
             <button (click)="aprobar(recarga)" class="btn-action btn-approve" title="Aprobar Recarga">
              <i class="fas fa-check"></i> Aprobar
            </button>
             <button (click)="rechazar(recarga)" class="btn-action btn-reject" title="Rechazar Recarga">
               <i class="fas fa-times"></i> Rechazar
             </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>